# 1. 网卡配置

## 1.1 临时配置

临时配置重启后失效, 非特殊说明都是立即生效.

### 1.1.1 临时IP

1. 修改

   ```bash
   ifconfig eth1 10.0.0.16 netmask 255.255.255.0
   ```

2. 增加

   ```bash
   ifconfig eth1:0 10.0.0.17 netmask 255.255.255.0
   ifconfig eth1:1 10.0.0.18 netmask 255.255.255.0
   ```

3. 删除

   1. 重启网络

      ```bash
      systemctl restart network
      service network restart
      ```

   2. 直接删除

      ```bash
      ifconfig eth1:0 del 10.0.0.17
      ```

### 1.1.2 临时DNS

1. 文件路径

   ```bash
   vim /etc/resolv.conf
   ```

   

2. 修改操作

   ```bash
   # Generated by NetworkManager
   nameserver 114.114.114.114
   nameserver 8.8.8.8
   ```

   



## 1.2 配置网卡

### 1.2.1 nmtui工具修改

linux系统大部分都可以使用此工具进行修改操作

1. 直接运行

   ```bash
   nmtui
   ```

   ![image-20200710221257821](image/02-%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE/image-20200710221257821.png)

2. 修改配置

   ![image-20200710221400551](image/02-%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE/image-20200710221400551.png)

3. 保存配置

   ![image-20200710221426227](image/02-%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE/image-20200710221426227.png)

### 1.2.2 Redhat

1. 修改配置

   位置: `vim /etc/sysconfig/network-scripts/ifcfg-eth1`

   ```bash
   DEVICE=eth1
   BOOTPROTO=static
   HWADDR=00:0c:29:aa:4a:7e
   IPV6INIT=yes
   NM_CONTROLLED=yes
   ONBOOT=yes
   TYPE=Ethernet
   #UUID=d808f1da-912d-4ec2-a5a2-9280744bfa1d
   USERCTL=no
   IPADDR=10.0.0.10
   NETMASK=255.255.255.0
   PREFIX=24
   GATEWAY=10.0.0.2
   DNS1=114.114.114.114
   DNS2=8.8.8.8
   ```

   * DEVICE: 网卡名称
   * BOOTPROTO: IP分配类型(静态/动态)    [static/dhcp/none]
   * HWADDR: MAC地址
   * IPV6INIT: 是否开启IPV6   [yes/no]
   * NM_CONTROLLED: 网卡修改后是否实时生效,   [yes/no]
   * ONBOOT:  是否开启网卡, [yes/no]
   * UUID: 网卡的uuid. 每个网卡都有一个独立的
   * USERCTL: 是否允许非root用户操作网卡,   [yes/no]
   * IPADDR: IPV4地址设置
   * NETMASK/PREFIX: 掩码配置
   * GATEWAY: 网关配置
   * DNS[1, 2, 3..]: 配置DNS解析服务器

2. 重启网卡

   ```bash
   systemctl restart network
   service network restart
   ```

### 1.2.3 Ubuntu

1. 修改网卡

   目录位置: `vim /etc/network/interfaces`

   ```bash
   auto ens33
   iface ens33 inet static
   address 10.0.0.11
   netmask 255.255.255.0
   network 10.0.0.0
   gateway 10.0.0.2
   broadcask 10.0.0.255
   dns-nameservers 114.114.114.114
   ```

   * iface ens33 inet static: 指定网卡和IP配置类型, [static/dhcp]
   * address: IPV4地址
   * netmask: 掩码
   * network: 网络地址
   * broadcask: 广播地址
   * gateway: 网关地址
   * dns-nameservers: DNS解析地址

   2. 重启网卡

      ```bash
      service networking restart
      /etc/init.d/networking restart
      
      或者单个网卡重启
      ifdown ens33
      ifup ens33
      ```

      

# 2. 其他配置

## 2.1 路由转发

### 2.1.1 方法一

操作文件: `/pro/sys/net/ipv4/ip_forward`

```bash
echo 1 > /pro/sys/net/ipv4/ip_forward  # 1表示开启路由转发功能, 0表示禁用转发
```

### 2.1.2 方法二

操作文件: `/etc/sysctl.conf`

增加如下内容

```bash
net.ipv4.ip_forward=1
```

激活功能, 并查看是否开启

```bash
sysctl -p  # 激活
cat /pro/sys/net/ipv4/ip_forward
```



