192.168.0.1(A)发送给192.168.1.2(B)数据

* 第一步

 应用层通过层层封装后到达数据链路层, 以太网帧形式如下:

![图片描述](04-%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92.assets/5e3674990001280616840186.png)

* 第二步

 交换机收到数据后, 读取对应的mac地址, 查看是否存在CAM表中, 如果没有存在, 则发送所有活跃端口, 存在则发送到对应的端口

* 第三步

 以太网帧到达路由器后, 路由器读取到mac地址为当前地址, 读取到ip信息, 查看是否存在路由表中, 如果不存在, 则发送arp协议, 获取对应ip的mac地址. 获取到mac地址后, 去除以太网帧中2层的头部信息, 重新添加上自己的mac地址, 将数据发送出去. 此时以太网帧

* 第四步

 以太网帧到达交换机后, 读取对应的mac地址, 查看是否存在CAM表中, 如果没有存在, 则发送所有活跃端口, 存在则发送到对应的端口

* 第五步

 B机器收到以太网帧后, 检查mac地址, IP正确后, 将传送给传输层, 传输层利用4层的头部解析数据信息, 传送给应用层

