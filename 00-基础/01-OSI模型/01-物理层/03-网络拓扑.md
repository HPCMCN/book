# 1. 网络拓扑

网络拓扑是指机器互相连接的方式

## 1.1 总线拓扑

1. 总线拓扑中同一时间只能有一台机器发送消息, 因为所有机器公用一条主线.
2. 不可以连接大量的机器, 机器数目越多, 每个机器等待发送信息的时间越久, 发送的机会就越少.


![image-20200514221454679](03-%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.assets/image-20200514221454679.png)


## 1.2 环形拓扑

1. 通信公用一个令牌, 拿到令牌的才能发送消息.

2. 和总线拓扑一样, 不可以连接大量机器. 否则令牌轮询到每个机器的时间将会延长


![图片描述](03-%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.assets/0.7169803619979556.png)


## 1.3 星型拓扑

1. 通讯需要经过中央机器发送消息, 会连带发送目标机器的名字，中央机器就会把信息根据目标机器的名字发送给正确的接收者。

2. 可以连接大量的机器, 每个中央机器（比如交换机）处理的机器是有限的, 但是可以多个中央机器组合在一起就可以处理大量的机器了


![图片描述](03-%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.assets/0.30173329316375175.png)


# 2. CSMA/CD

CSMA/CD(Carrier Sense Multiple Access / Collision Detection), 带有冲突检测的载波侦听多路存取.

## 2.1 作用

在总线拓扑中, 如果同一时间存在两台机器同时发送消息, 当2个电信号都为5v时, 信息不收干扰, 但是如果一个为5v一个为0v时, 那么最终接受到的信号将会一致的变为5v, 此时信息解析就会错乱. 为了避免这种冲突, 引入了CSMA/CD协议, 目的: 

通过分配发言的权利，来限制冲突的数目


## 2.2 运作流程

1. A机器与B机器同时发送信息时

2. 它们侦测到了冲突

3. AB各自等待随机一段时间, 假设A等待1ms, B等待2ms

4. 1ms后A发送消息

5. 2ms后B发送消息, 侦测到存在机器在发送消息, 再次等待随机一段时间

6. A发送消息完毕后, B开始发送消息
