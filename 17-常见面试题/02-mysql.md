1. mysql锁

   ```shell
   * 表级锁: 开销小/速度快, 不会死锁, 并发低  --> InnoDB/MyISAM/MEMORY
   * 行级锁: 开销大/速度慢, 会死锁, 并发高    --> InnoDB
   * 页面锁: 开销中等/速度中等, 会出现死锁, 并发一般  --> BDB
   ```

2. mysql索引是什么? 什么样的操作会绕过索引?b+tree与hash的区别?

3. mysql 注意事项

   事务: 原子性, 一致性, 隔离性, 永久性

   索引: 排序的结构, 协助快速查询的. 常见的b_tree在根节点保存了子节点的指针, 达到快速查找的效果

   引擎:

   * InnoDB: 支持事务, 多版本并发, 外键. 占用数据空间大, 读写效率查
   * MyISAM: 访问速度快. 占用空间大, 容易产生碎片空间
     * frm: 表结构存储
     * myd: 数据存储
     * myi: 索引存储
   * MEMORY: 采用hash索引, 内存存储, 利于数据的快速处理. 但是容易丢失数据![img](.image/02-mysql/2020081017332271-1711101896226.png)

   优化:

   * 引擎选择InnoDB
   * 分表分库(水平拆分), 分库读写分离(垂直拆分)
   * sql优化 
     * 加索引
     * 避免全表扫描, 一下判断将放弃使用索引, 进行全表扫描: null判断, !=, <>, or中有个没索引
     * update指定字段, 不要全量修改.
     * 先分页在join
   * 遵循三范式设计表结构: 列不可在分割, 有唯一表示, 引用主键
   * 使用缓存或者NoSQL存储
   * 增加硬件SSD
   * 架构分布式
